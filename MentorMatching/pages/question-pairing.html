<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quesion Pair</title>
    <script src="../Models/User.js"></script>
  </head>
  <body>
    <h1>Please pair the quesitons to be matched.</h1>
    <div id="pairing-section"></div>

    <script>
      const pairing_section = document.getElementById("pairing-section");

      const menteeSurvey = new Survey("MenteeSurvey");
      const mentorSurvey = new Survey("MentorSurvey");

      const menteeSelectedQuestions = JSON.parse(
        localStorage.getItem("MenteeSelectedQuestions")
      ).map((q) => {
        const index = q.split("-")[1];
        return menteeSurvey.getQuestionAtIndex(index);
      });

      const mentorSelectedQuestions = JSON.parse(
        localStorage.getItem("MentorSelectedQuestions")
      ).map((q) => {
        const index = q.split("-")[1];
        return menteeSurvey.getQuestionAtIndex(index);
      });

      for (let i = 0; i < menteeSelectedQuestions.length; i++) {
        const currentQuestion = menteeSelectedQuestions[i];
        const select = document.createElement("select");
        select.name = "Q" + (i + 1);
        select.id = "Q" + (i + 1);

        const label = document.createElement("label");
        label.innerText = currentQuestion;
        const breakEl = document.createElement("br");
        populateOptions(mentorSelectedQuestions, select);
        pairing_section.append(label, breakEl, select);
      }

      function populateOptions(questions, tag) {
        questions.forEach((question) => {
          const option = document.createElement("option");
          option.value = question;
          option.innerText = question;
          tag.append(option);
        });
      }
    </script>
  </body>
</html>
